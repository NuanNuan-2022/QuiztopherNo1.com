<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Geography Quiz Game</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 800px; margin: auto; }
    h1 { text-align: center; }
    #game, #question-box, #result-box { display: none; margin-top: 20px; }
    .choice { display: block; margin: 5px 0; }
    .btn { margin-top: 10px; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>

<h1>Geography Quiz Game</h1>

<div id="difficulty-select">
  <h3>Select Difficulty</h3>
  <button class="btn" onclick="startGame('easy')">Easy</button>
  <button class="btn" onclick="startGame('medium')">Medium</button>
  <button class="btn" onclick="startGame('hard')">Hard</button>
</div>

<div id="game">
  <div id="question-box">
    <h3 id="question"></h3>
    <button class="choice" onclick="answer('A')" id="optA"></button>
    <button class="choice" onclick="answer('B')" id="optB"></button>
    <button class="choice" onclick="answer('C')" id="optC"></button>
    <button class="choice" onclick="answer('D')" id="optD"></button>
  </div>
  <div id="result-box">
    <p>‚úÖ Correct: <span id="correct">0</span></p>
    <p>‚ùå Incorrect: <span id="wrong">0</span></p>
    <p>üìå Remaining: <span id="remaining">0</span></p>
  </div>
</div>

<script>
let allQuestions = [], current = 0, correct = 0, wrong = 0, selectedQuestions = [];

fetch('questions.txt')
  .then(response => response.text())
  .then(text => {
    const lines = text.trim().split('\n');
    allQuestions = lines.map(line => {
      const [q, A, B, C, D, correct, diff] = line.split('|').map(s => s.trim());
      return {q, A, B, C, D, correct, diff};
    });
    document.getElementById('difficulty-select').style.display = 'block';
  })
  .catch(error => {
    document.body.innerHTML = "<p style='color:red;'>Failed to load questions.txt</p>";
    console.error(error);
  });

function startGame(difficulty) {
  selectedQuestions = allQuestions.filter(q => q.diff === difficulty);
  if (selectedQuestions.length === 0) {
    alert("No questions found for this difficulty level.");
    location.reload();
    return;
  }

  selectedQuestions.sort(() => Math.random() - 0.5);
  correct = wrong = current = 0;
  document.getElementById('difficulty-select').style.display = 'none';
  document.getElementById('game').style.display = 'block';
  document.getElementById('question-box').style.display = 'block';
  document.getElementById('result-box').style.display = 'block';
  showQuestion();
}

function showQuestion() {
  if (current >= selectedQuestions.length) {
    alert("Quiz Over!\nCorrect: " + correct + "\nWrong: " + wrong);
    location.reload();
    return;
  }
  const q = selectedQuestions[current];
  document.getElementById('question').textContent = q.q;
  document.getElementById('optA').textContent = "A. " + q.A;
  document.getElementById('optB').textContent = "B. " + q.B;
  document.getElementById('optC').textContent = "C. " + q.C;
  document.getElementById('optD').textContent = "D. " + q.D;
  document.getElementById('remaining').textContent = selectedQuestions.length - current;
  document.getElementById('correct').textContent = correct;
  document.getElementById('wrong').textContent = wrong;
}

function answer(choice) {
  const q = selectedQuestions[current];
  if (choice === q.correct) {
    correct++;
  } else {
    wrong++;
  }
  current++;
  showQuestion();
}
</script>

</body>
</html>
